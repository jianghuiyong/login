<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>

</head>
<body>
<div class="container">
<form action="" class="form-horizontal">
	<div class="form-group">
		<label class="col-md-2 control-label" >用户名</label>
		<div class="col-md-10">
			<input type="text" placeholder="user" id="userName" />
		</div>
	</div>
	<div class="form-group">
		<label class="col-md-2 control-label" >密码</label>
		<div class="col-md-10">
			<input type="password" placeholder="Password" id="pwd" />
		</div>
	</div>
	<div class="form-group">
		<div class="col-md-offset-2 col-md-10">
			<div class="checkbox">
				<label for="">
					<input type="checkbox" />记住密码
				</label>
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="col-md-offset-2 col-md-10">		
			<button type="button" class="btn btn-default" id="login">登录</button>
			<button type="button" class="btn btn-default" id="reg">注册</button>
		</div>
	</div>
</form>
<div id="loginname">1</div>
</div>
<script>
	document.getElementById("login").onclick=function(){
		var request = new XMLHttpRequest();
		
		request.open("GET","http://localhost/dome.php?name="+document.getElementById("userName").value+"&password="+document.getElementById("pwd").value);
		request.send();
		request.onreadystatechange = function(){
			if(request.readyState === 4){
				if(request.status === 200){
					var data = JSON.parse(request.responseText);
					if(data.success){
						document.getElementById("loginname").innerHTML=data.msg;
					}else{
						document.getElementById("loginname").innerHTML="出错"+data.msg;
					}
				}else{
					alert("发生错误"+request.status);
					}
				}
			}
	}
	
	document.getElementById("reg").onclick=function(){
		var request = new XMLHttpRequest();
		request.open("POST","http://localhost/dome.php");
		var data=
			"name="+document.getElementById("userName").value+"&password="+document.getElementById("pwd").value;
		request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
		request.send(data);
		request.onreadystatechange = function(){
			if(request.readyState === 4){
				if(request.status === 200){
					var data = JSON.parse(request.responseText);
					if(data.success){
						document.getElementById("loginname").innerHTML=data.msg;
					}else{
						document.getElementById("loginname").innerHTML="出错"+data.msg;
					}
				}else{
					alert("发生错误"+request.status);
					}
				}
			}
	}
</script>
</body>
</html>